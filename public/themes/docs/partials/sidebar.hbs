{{!-- Documentation Sidebar Navigation --}}
<nav 
  class="sidebar"
  :class="sidebarOpen ? 'mobile-open' : ''"
>
  {{!-- Close button for mobile --}}
  <button 
    class="sidebar-close"
    @click="sidebarOpen = false"
    aria-label="Close navigation"
  >
    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
    </svg>
  </button>

  {{!-- Navigation tree --}}
  <div class="sidebar-nav">
    {{#each navLinks}}
      {{#if this.children}}
        {{!-- Parent item with children --}}
        <div class="nav-section">
          <div class="nav-parent">
            <a 
              href="{{this.href}}" 
              :class="isActive('{{this.href}}') ? 'nav-active' : ''"
              @click="sidebarOpen = false"
              style="flex: 1;"
            >
              {{this.label}}
            </a>
            <button
              class="nav-toggle"
              :class="expandedSections.includes('{{@index}}') ? 'expanded' : ''"
              @click="toggleSection('{{@index}}')"
              type="button"
              aria-label="Toggle {{this.label}} submenu"
            >
              <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 111.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
              </svg>
            </button>
          </div>
          
          {{!-- Children --}}
          <div 
            class="nav-children"
            x-show="expandedSections.includes('{{@index}}')"
            x-transition:enter="transition ease-out duration-200"
            x-transition:enter-start="opacity-0 -translate-y-1"
            x-transition:enter-end="opacity-100 translate-y-0"
            x-transition:leave="transition ease-in duration-150"
            x-transition:leave-start="opacity-100 translate-y-0"
            x-transition:leave-end="opacity-0 -translate-y-1"
          >
            {{#each this.children}}
            <a 
              href="{{this.href}}" 
              class="nav-child"
              :class="isActive('{{this.href}}') ? 'nav-active' : ''"
              @click="sidebarOpen = false"
            >
              {{this.label}}
            </a>
            {{/each}}
          </div>
        </div>
      {{else}}
        {{!-- Single item without children --}}
        <div class="nav-section">
          <a 
            href="{{this.href}}" 
            class="nav-item"
            :class="isActive('{{this.href}}') ? 'nav-active' : ''"
            @click="sidebarOpen = false"
          >
            {{this.label}}
          </a>
        </div>
      {{/if}}
    {{/each}}
  </div>
</nav>

{{!-- Mobile backdrop --}}
<div 
  class="mobile-backdrop"
  :class="sidebarOpen ? 'active' : ''"
  x-show="sidebarOpen"
  @click="sidebarOpen = false"
  x-transition:enter="transition ease-out duration-300"
  x-transition:enter-start="opacity-0"
  x-transition:enter-end="opacity-100"
  x-transition:leave="transition ease-in duration-200"
  x-transition:leave-start="opacity-100"
  x-transition:leave-end="opacity-0"
></div>